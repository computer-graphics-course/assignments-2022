## Lab 4. Ray tracing* 

В цій роботі вам треба імплементувати справжній алгоритм трасування променів, а не ray casting. Відмінність полягає в тому, що алгоритм так чи інакше враховуватиме не тільки безпосереднє освітлення (direct lighting), а і непряме (indirect lighting) або глобальне освітлення (global illumination). Для спрощення задачі ми не будемо прагнути досягти фізично-коректного освітлення, а обмежимося приблизними обрахунками, які часто будуть сильно порушувати закони збереження енергії.

Написаний в цій лабораторній роботі алгоритм є дуже спрощеною імплементацією алгоритма Монте-Карло.

1. Змініть алгоритм трасування таким чином, щоб при перетині первинного променя із об'єктом, створювався ще один вторинний промінь на додачу до того, який перевіряє затінення. Вторинний промінь повинен мати довільний напрямок (очевидно у верхній напівсфері локального простору точки перетину). Вторинний промінь трасується рекурсивно так само як і первинний. Таким чином ми отримаємо освітлення первинної точки перетину не тільки зі сторони джерел освітлення, а і з боку інших об'єктів.
2. Для кожного пікселя створюйте не один, а кілька первинних променів. Вторинні промені на них будуть різні, тому при достатній кількості первинних променів алгоритм зможе доволі вдало відтворювати ефекти глобального освітлення. Після отримання результатів трасування всіх первинних променів їх можна за результат взяти їхнє середнє значення.
3. Створіть матеріал, який випромінює світло: має певний колір незалежно від того, падає на нього світло чи ні. Тепер додаючи такий матеріал на певний об'єкт, ви отримуєте джерело світла певної форми. Воно не потребує додаткових змін в коді алгоритму - в тому сенсі, що навідміну від точкових джерел, воно не потребує окремого променя, яким би трасувалася тінь. 